# タスク管理ルール

## 📋 基本ルール

### 1. タスクファイルの更新

#### タスク完了時
- `TASKS.md` の該当タスクのチェックボックスを `- [ ]` から `- [x]` に変更
- 完了日を `[完了: YYYY-MM-DD]` の形式で追記
- 必要に応じて、実装内容のメモを追加

#### タスク追加時
- 仕様書（`SPECIFICATION.md`）の該当セクション番号を記載
- 適切な優先度カテゴリに配置
- 依存関係がある場合は明記

#### タスク修正時
- 仕様書の変更に合わせてタスクも更新
- 不要になったタスクは削除（履歴に残す）
- タスクの分割・統合が必要な場合は実施

---

### 2. 仕様書との整合性確認

#### 週次確認（推奨: 毎週月曜日）
1. **実装予定機能の確認**
   - `SPECIFICATION.md` の「実装予定機能」セクションを確認
   - `TASKS.md` の未完了タスクと一致しているか確認
   - 不一致があれば修正

2. **実装済み機能の確認**
   - `SPECIFICATION.md` の「実装済み機能」セクションを確認
   - `TASKS.md` の完了タスクと一致しているか確認
   - 完了タスクがあれば仕様書に反映

3. **仕様変更の反映**
   - 仕様書に変更があった場合、タスクファイルも更新
   - 新規機能が追加された場合、タスクを追加
   - 削除された機能があれば、タスクも削除

#### 実装前の確認
- 新しい機能を実装する前に、仕様書の該当セクションを再確認
- タスクの内容が仕様書と一致しているか確認
- 不一致があれば、仕様書またはタスクを修正

#### 実装後の確認
- 実装完了後、仕様書の「実装済み機能」セクションに追加
- 「実装予定機能」から該当項目を削除
- タスクファイルの進捗状況を更新

---

### 3. タスクの優先順位

#### 優先度の定義
- **🔥 高（コア機能）**: プロジェクトの核心となる機能。最優先で実装
- **⚡ 中（企画システム）**: 重要な機能だが、コア機能の後に実装
- **📝 低（UI・設定）**: ユーザビリティ向上のための機能
- **🔧 その他（インフラ・最適化）**: パフォーマンスや運用に関する機能

#### 実装順序の推奨
1. コア機能（1タブ2体表示、音声合成、Live2D）
2. XML パース機能
3. コメント接頭辞システム
4. 企画システム
5. UI・設定の改善
6. 最適化・テスト

---

### 4. タスクの分割・統合

#### タスクが大きすぎる場合
- より細かいサブタスクに分割
- 各サブタスクを個別にチェック可能にする
- 依存関係を明確にする

#### タスクが小さすぎる場合
- 関連するタスクを統合
- ただし、進捗管理が困難になる場合は分割を維持

---

### 5. 進捗状況の更新

#### 週次更新
- 完了タスク数を更新
- 進捗率を計算して更新
- カテゴリ別進捗を更新

#### 月次レビュー
- 全体の進捗を確認
- 遅れているタスクを特定
- 優先順位の見直し

---

### 6. 変更履歴の記録

#### 記録する内容
- タスクの追加・削除
- タスクの完了
- 仕様書との整合性確認の実施
- 重要な変更や決定事項

#### 記録形式
```markdown
### YYYY-MM-DD
- [完了] タスク名（タスクID）
- [追加] 新規タスク名
- [修正] タスク名（変更内容）
- [削除] タスク名（理由）
```

---

## 🔍 整合性チェックリスト

### 仕様書とタスクファイルの整合性確認

#### 実装予定機能の確認
- [ ] `SPECIFICATION.md` の「実装予定機能」に記載されている機能が、`TASKS.md` の未完了タスクに含まれているか
- [ ] `TASKS.md` の未完了タスクが、`SPECIFICATION.md` の「実装予定機能」に記載されているか
- [ ] 仕様書の該当セクション番号がタスクに記載されているか

#### 実装済み機能の確認
- [ ] `SPECIFICATION.md` の「実装済み機能」に記載されている機能が、`TASKS.md` の完了タスクに含まれているか
- [ ] `TASKS.md` の完了タスクが、`SPECIFICATION.md` の「実装済み機能」に記載されているか

#### 仕様変更の反映確認
- [ ] 仕様書に新規機能が追加された場合、タスクも追加されているか
- [ ] 仕様書から機能が削除された場合、タスクも削除されているか
- [ ] 仕様書の内容が変更された場合、タスクも更新されているか

---

## 📝 実装時のチェックリスト

### 実装開始前
- [ ] 仕様書の該当セクションを確認
- [ ] タスクの内容が仕様書と一致しているか確認
- [ ] 依存関係のあるタスクが完了しているか確認
- [ ] 実装方針を決定

### 実装中
- [ ] 仕様書に記載されている要件を満たしているか確認
- [ ] タスクのサブタスクを順次完了
- [ ] 問題が発生した場合は、仕様書とタスクを再確認

### 実装完了後
- [ ] タスクのチェックボックスを完了に変更
- [ ] 完了日を記録
- [ ] 仕様書の「実装済み機能」に追加
- [ ] 仕様書の「実装予定機能」から削除
- [ ] 進捗状況を更新

---

## 🚨 注意事項

### 仕様書とタスクの不一致が発生した場合
1. **仕様書が正しい場合**: タスクを修正
2. **タスクが正しい場合**: 仕様書を修正
3. **どちらも正しい場合**: 両方を更新して整合性を保つ

### タスクの完了判定
- コードの実装が完了しただけでは不十分
- テストが完了していること
- 仕様書の要件を満たしていること
- ドキュメントが更新されていること

### 仕様変更時の対応
- 仕様書を先に更新
- その後、タスクファイルを更新
- 既存の実装に影響がある場合は、影響範囲を確認

---

## 📚 関連ファイル

- **タスクファイル**: `TASKS.md`
- **仕様書**: `SPECIFICATION.md`
- **このルールファイル**: `TASK_MANAGEMENT_RULES.md`

---

**最終更新**: 2024-XX-XX

